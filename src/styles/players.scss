@use "./consts.scss" as *;

.players {
  position: fixed;
  top: 1em;
  right: 1em;
  min-width: 10em;
  direction: rtl;
}

.player {
  padding: .3em .5em .2em;
  min-height: 2.65em;

  > .name {
    height: 1.5em;
    font-size: .5rem;
    letter-spacing: .05ch;
  }

  @each $name, $color in $playerColors {
    &.#{$name} {
      background: linear-gradient(to right, #0000, rgba($color, .3) 2em, rgba($color, .3) calc(100% - .2em), #0000);

      > .name > span {
        color: darken($color, 20);
      }
    }
  }

  > .resources {
    perspective: 10rem;

    > .card {
      @function count($k, $m: 0) {
        @return calc($k*var(--count, 2) + $m);
      }

      $w : 1.3em;
      $h : 1.9em;
      margin-left: clamp(-.75em, count(-.0875em, .275em), .1em);
      transform: rotateY(clamp(330deg, count(-3.75deg, 367.5deg), 360deg));
      box-shadow: clamp(.2em, count(.05em, .1em), .4em) .1em clamp(.1em, count(.0125em, .075em), .2em) #0007;
      background: center center/#{$pixelDensity*8} $pixelDensity*8;
      width: $w;
      height: $h;
      border-radius: .16em;
      overflow: hidden;
      display: inline-block;
      transition: 300ms ease-out;
      transition-property: transform, margin-left, box-shadow;

      &:first-child {
        box-shadow: .2em .1em .1em #0007;
      }

      &::after {
        content: '';
        background: url("../assets/paper.png") center / 100% 100%;
        position: absolute;
        width: $w*1.9;
        left: $w*-.45;
        height: $h*1.4;
        top: $h*-.2;
        filter: saturate(0);
        pointer-events: none;
      }

      @include textures(false);

      &.Sheep::before {
        $sheeps: 5;
        content: '';
        background-image: repeat(url('../assets/sheepAnimal.png'), $sheeps);
        background-position: 50% 15%, 86% 74%, 77% 38%, 46% 64%, 23% 21%;
        background-size: $tileWidth*.03125 $tileHeight*.015625;
        background-repeat: no-repeat;
        position: absolute;
        top: 0;
        left: 0;
        inset: 0;
        rotate: 30deg;
      }
    }
  }
}